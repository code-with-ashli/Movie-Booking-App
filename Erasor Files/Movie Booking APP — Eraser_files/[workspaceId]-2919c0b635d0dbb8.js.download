(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4144],{5087:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/workspace/[workspaceId]",function(){return t(44540)}])},13032:function(n,e,t){"use strict";var r=t(52322),i=t(33337),u=t(14898),o=t(17366);e.Z=function(n){var e=n.hideSplashOnLoad,t=void 0===e||e,a=n.children,c=(0,u.fC)();return(0,o.Z)((function(){c&&t&&(0,i.hf)()}),[c,t]),c?(0,r.jsx)(r.Fragment,{children:a}):null}},43258:function(n,e,t){"use strict";var r=t(25237),i=t.n(r),u=t(45217);window.hljs=u.ZP,e.Z=i()((function(){return Promise.all([t.e(9774),t.e(3484),t.e(1131),t.e(7643),t.e(4526),t.e(5060),t.e(1498),t.e(2656),t.e(4548),t.e(4941),t.e(5713),t.e(9806),t.e(6108),t.e(1925),t.e(1023),t.e(2199),t.e(8602),t.e(5940),t.e(3336),t.e(3165),t.e(6250),t.e(427),t.e(9983),t.e(5831),t.e(804),t.e(1180),t.e(7572),t.e(9523),t.e(34),t.e(4149)]).then(t.bind(t,87398))}),{loadableGenerated:{webpack:function(){return[87398]}},ssr:!1})},30096:function(n,e,t){"use strict";var r=t(2784),i=t(6673);e.Z=function(){(0,r.useEffect)((function(){return i.Z.init(),function(){return i.Z.dispose()}}),[])}},26138:function(n,e,t){"use strict";var r=t(52322),i=(0,t(2784).memo)((function(){return(0,r.jsx)("style",{dangerouslySetInnerHTML:{__html:"\n      body {\n        overflow: hidden;\n      }\n    "}})}));i.displayName="WorkspaceBodyStyles",e.Z=i},29639:function(n,e,t){"use strict";var r=t(52322),i=t(69212),u=t(33337),o=t(41573),a=t(17366);e.Z=function(n){var e=n.hideSplashOnLoad,t=void 0===e||e,c=n.isEmbedIntegration,s=void 0!==c&&c,l=n.children,d=(0,o.Rx)(),f=(0,o.vP)(),v=(0,o.sx)();return(0,a.Z)((function(){d&&t&&(0,u.hf)()}),[d,t]),d?(null===v||void 0===v?void 0:v.hasAccess)?f?(0,r.jsx)(r.Fragment,{children:l}):(0,r.jsx)(i.Z,{statusCode:404,hideActionButtons:s}):(0,r.jsx)(i.Z,{statusCode:403,hideActionButtons:s}):null}},90927:function(n,e,t){"use strict";var r=t(52322),i=t(97729),u=t.n(i),o=t(41573);e.Z=function(){var n=(0,o.u0)();return n?(0,r.jsx)(u(),{children:(0,r.jsxs)("title",{children:[n," \u2014 Eraser"]})}):null}},77084:function(n,e,t){"use strict";var r=t(25237),i=t.n(r);e.Z=i()((function(){return t.e(3379).then(t.bind(t,3379))}),{loadableGenerated:{webpack:function(){return[3379]}},ssr:!1})},84622:function(n,e,t){"use strict";t.d(e,{P:function(){return f},X:function(){return d}});var r=t(52322),i=t(2784),u=t(72236),o=t(83191),a=t(14898),c=t(32331),s=t(44883),l={dismiss:function(){},wasDismissed:function(){return!1}},d=(0,i.createContext)(l),f=function(n){var e,t=n.tutorialId,l=n.children,f=(0,i.useState)([]),v=f[0],p=f[1],h=(0,o.b)().activations,_=(0,a.aF)();(0,i.useEffect)((function(){var n;p((null===_||void 0===_||null===(n=_.userSettings)||void 0===n?void 0:n.dismissedHints)||[])}),[null===_||void 0===_||null===(e=_.userSettings)||void 0===e?void 0:e.dismissedHints]);var m=(0,i.useCallback)((function(n){return v.includes(n)}),[v]),w=(0,i.useCallback)((function(n){if(_&&n&&!m(n)){var e=v.concat(n);p(e),c.H.updateUserSettings(_.id,{dismissedHints:e})}}),[_,v,m]);return(0,i.useEffect)((function(){h[s.c.AddFigure]&&w(u.X.ORGANIZE_WITH_FIGURES),h[s.c.AddFigureEmbed]&&w(u.X.EMBED_FIGURE_IN_DOCUMENT),h[s.c.AddComment]&&w(u.X.LEAVE_COMMENT)}),[h,w]),(0,r.jsx)(d.Provider,{value:{activeTutorialId:t,dismiss:w,wasDismissed:m},children:l})}},94234:function(n,e,t){"use strict";t.d(e,{s:function(){return i}});var r=t(19605),i=function(){return"true"===(0,r.K)().embed}},32712:function(n,e,t){"use strict";var r=t(2784),i=t(97184);e.Z=function(){return(0,r.useContext)(i.ZP)}},66610:function(n,e,t){"use strict";t.d(e,{V:function(){return u},Y:function(){return o}});var r=t(21746),i=t(57899),u=function(){return(0,r.Sz)(i.Z,(function(n){return n}))},o=function(){return(0,r.Sz)(i.Z,(function(n){return(null===n||void 0===n?void 0:n.getArray("skip_file_auth_team_ids"))||[]}))}},44540:function(n,e,t){"use strict";t.r(e),t.d(e,{__N_SSP:function(){return W},createWorkspaceOg:function(){return q},default:function(){return J}});var r=t(52322),i=t(2784),u=t(5632),o=t.n(u),a=t(13032),c=t(69212),s=t(55632),l=t(52449),d=t(32140),f=t(94234),v=t(54599),p=t(32712),h=t(66610),_=t(14898),m=t(49797),w=t(41573),g=t(57120),x=t(68056),I=t(39449),E=t(3559),b=t(53822),A=t(50639),k=t(5233),T=t(41302),U=t.n(T),S=function(n){var e=n.ownerId,t=(0,m.Z)(null!==e&&void 0!==e?e:"");return t?(0,r.jsxs)("p",{children:["Create a free account to collaborate with ",t.displayName,". By signing up, you agree to our ",(0,r.jsx)("a",{href:"".concat(s.CF.url,"/terms"),children:"terms of service"})]}):null};function R(){var n=new URLSearchParams(window.location.search);return n.set(d.eX,"true"),"".concat(window.location.pathname,"?").concat(n.toString())}var Z=function(){var n,e,t=(0,f.s)(),u=(0,A.d)(),a=(0,_.fC)(),c=(0,_.TF)(a),s=(0,h.Y)(),d=(0,w.bm)(),m=d.teamInfo,T=d.workspace,Z="integration"===d.environment,C=(0,l.fu)((null===(n=d.workspace)||void 0===n?void 0:n.id)||"",null===a||void 0===a?void 0:a.id),M=(0,p.Z)().setOffsetTop,O=(0,i.useState)(c&&!t&&!u),y=O[0],j=O[1],N=(0,v.ZP)(),P=(null===m||void 0===m?void 0:m.id)&&(s.includes(m.id)||(null===T||void 0===T?void 0:T.isAnonymousAccessAllowed)||(null===T||void 0===T?void 0:T.directAccessMode)===k.lL.Read),L=m&&!P&&!Z&&y;(0,i.useEffect)((function(){M(y?40:0)}),[y,M]),(0,i.useEffect)((function(){var n;L&&c&&(g.Z.trackEvent(null,"page_view",{page_title:"Sign Up",page_location:"".concat(document.location.origin,"/auth/sign-up"),page_path:"/auth/sign-up",embedded_at_path:o().asPath}),N.openSignUpModal({isClosable:!1,customSubTitle:(0,r.jsx)(S,{ownerId:null===(n=d.workspace)||void 0===n?void 0:n.ownerId}),profileArgs:{signUpOrigin:"workspace"},onSignIn:function(n){var e;o().replace(R()),j(!1),N.closeAuthModal(),(null===m||void 0===m?void 0:m.isAutoJoinEnabled)&&(null===n||void 0===n?void 0:n.user)&&(null===(e=n.additionalUserInfo)||void 0===e?void 0:e.isNewUser)&&(0,x.Z)(m.id,null===n||void 0===n?void 0:n.user.uid,{isAutoJoin:!0,origin:"workspace"}).catch((function(){}))}}))}),[L,N.openSignUpModal,N.closeAuthModal,c,m,null===(e=d.workspace)||void 0===e?void 0:e.ownerId]);var D=(0,i.useCallback)((function(){g.Z.trackEvent("auth_banner","sign_up_click",{teamId:null===m||void 0===m?void 0:m.id,teamDomain:null===m||void 0===m?void 0:m.domain,teamAutoJoinEnabled:null===m||void 0===m?void 0:m.isAutoJoinEnabled,activeCollaborarCount:C.length}),g.Z.trackEvent(null,"page_view",{page_title:"Sign Up",page_location:"".concat(document.location.origin,"/auth/sign-up"),page_path:"/auth/sign-up",embedded_at_path:o().asPath}),N.openSignUpModal({isClosable:!0,profileArgs:{signUpOrigin:Z?"integration":"workspace"},onSignIn:function(){o().replace(R()),j(!1)}})}),[m,N.openSignUpModal,C,Z]);return!y||L?null:(0,r.jsx)("div",{className:U().header,children:(0,r.jsxs)("div",{className:U().wrapper,"data-testid":"auth-banner",children:[(0,r.jsx)("div",{className:U().text,children:"Create multiple files and share everything with your team."}),(0,r.jsx)(E.ZP,{className:U().signIn,onClick:D,children:"Sign Up Free"}),(0,r.jsx)("div",{className:U().close,children:(0,r.jsx)(b.J,{icon:I.Z,onClick:function(){return j(!1)}})})]})})},C=t(43258),M=t(30096),O=t(26138),y=t(29639),j=t(90927),N=t(77084),P=t(97184),L=t(77324),D=t(98523),G=t(68732),F=t(19605),B=t(36171),H=function(n){var e=n.workspaceId,t=(0,F.K)(),r=(0,G.LP)(),u=(0,i.useState)(!1),o=u[0],a=u[1],c=(0,B.X)().request;return(0,i.useEffect)((function(){"duplicate"===t.action&&e&&"string"===typeof e&&r&&!o&&(a(!0),c({workspaceId:e,teamId:r},{reload:!0}))}),[r,c,o,t.action,e]),null},X=t(84622),W=!0,q=function(n,e,t){n=n||"Untitled File";var r=t.split("?");return t="".concat(r[0],"/preview").concat(2===r.length?"?":"").concat(r[1]||""),{title:n,description:e||"Create diagrams, wireframes, technical specs with your team. Your all-in-one technical ideation tool.",images:[{url:"".concat(s.l2.url).concat(t),width:1200,height:630,alt:n}]}},J=function(){var n=(0,u.useRouter)(),e=n.query.workspaceId;return(0,M.Z)(),H({workspaceId:e}),n.isReady?"string"!==typeof e?(0,r.jsx)(c.Z,{statusCode:404,title:"File not found"}):(0,r.jsxs)("div",{className:"workspace",children:[(0,r.jsx)(a.Z,{hideSplashOnLoad:!1,children:(0,r.jsx)(L.X,{workspaceId:e,children:(0,r.jsx)(D.Z,{children:(0,r.jsx)(X.P,{children:(0,r.jsxs)(y.Z,{children:[(0,r.jsx)(j.Z,{}),(0,r.jsx)(N.Z,{}),(0,r.jsxs)(P.Sh,{children:[(0,r.jsx)(Z,{}),(0,r.jsx)(C.Z,{})]})]})})})})}),(0,r.jsx)(O.Z,{})]}):null}},98523:function(n,e,t){"use strict";t.d(e,{K:function(){return _}});var r=t(94776),i=t.n(r),u=t(52322),o=t(2784),a=t(21746),c=t(68732),s=t(97879),l=t(46908),d=t(24067);function f(n,e,t,r,i,u,o){try{var a=n[u](o),c=a.value}catch(s){return void t(s)}a.done?e(c):Promise.resolve(c).then(r,i)}function v(n){return function(){var e=this,t=arguments;return new Promise((function(r,i){var u=n.apply(e,t);function o(n){f(u,r,i,o,a,"next",n)}function a(n){f(u,r,i,o,a,"throw",n)}o(void 0)}))}}var p={icons:[],isLoaded:!1},h=(0,a.kr)(p),_=function(){return(0,a.qp)(h)};e.Z=function(n){var e=n.children,t=(0,c.LP)(),r=(0,o.useState)(p.icons),a=r[0],f=r[1],_=(0,o.useState)(p.isLoaded),m=_[0],w=_[1],g=(0,d.Su)().customIconsService,x=(0,o.useRef)(new Set);return(0,o.useEffect)((function(){return function(){x.current.clear()}}),[t]),(0,o.useEffect)((function(){if(t)return g.subscribeByTeamId(t,function(){var n=v(i().mark((function n(e){var t,r,u,o,a,c,d;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(!m&&e&&w(!0),t=[],r=!0,u=!1,o=void 0,n.prev=3,a=function(n,e){var r=e.value,u=void 0;if(x.current.has(r.label))return"continue";var o=new Promise(function(){var n=v(i().mark((function n(e,t){var o;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(x.current.add(r.label),!s.LD.has(r.label)){n.next=5;break}u=s.LD.get(r.label),n.next=12;break;case 5:return n.next=7,fetch(r.url);case 7:return o=n.sent,n.next=10,o.text();case 10:u=n.sent,s.LD.set(r.label,u);case 12:if(u){n.next=15;break}return t(),n.abrupt("return");case 15:return n.next=17,(0,l.w)(u);case 17:e(u),x.current.delete(r.label);case 19:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}());t.push(o)},c=e[Symbol.iterator]();!(r=(d=c.next()).done);r=!0)a(0,d);n.next=12;break;case 8:n.prev=8,n.t0=n.catch(3),u=!0,o=n.t0;case 12:n.prev=12,n.prev=13,r||null==c.return||c.return();case 15:if(n.prev=15,!u){n.next=18;break}throw o;case 18:return n.finish(15);case 19:return n.finish(12);case 20:Promise.allSettled(t),f(e);case 22:case"end":return n.stop()}}),n,null,[[3,8,12,20],[13,,15,19]])})));return function(e){return n.apply(this,arguments)}}())}),[m,t,g]),(0,u.jsx)(h.Provider,{value:{icons:a,isLoaded:m},children:e})}},72236:function(n,e,t){"use strict";var r;t.d(e,{X:function(){return r}}),function(n){n.DIAGRAM_GPT_TOUR="DIAGRAM_GPT_TOUR",n.PRODUCT_TOUR="PRODUCT_TOUR",n.INSERT_MENU_TUTORIAL="INSERT_MENU_TUTORIAL",n.MAKE_A_FIGURE_TUTORIAL="MAKE_A_FIGURE_TUTORIAL",n.DIAGRAM_WITH_CODE_TUTORIAL="DIAGRAM_WITH_CODE_TUTORIAL",n.AI_DIAGRAM_TUTORIAL="AI_DIAGRAM_TUTORIAL",n.EMBED_FIGURE_IN_DOCUMENT="EMBED_FIGURE_IN_DOCUMENT",n.LEAVE_COMMENT="LEAVE_COMMENT",n.ORGANIZE_WITH_FIGURES="ORGANIZE_WITH_FIGURES"}(r||(r={}))},97879:function(n,e,t){"use strict";t.d(e,{E0:function(){return s},LD:function(){return o},dq:function(){return a}});var r=t(94776),i=t.n(r);function u(n,e,t,r,i,u,o){try{var a=n[u](o),c=a.value}catch(s){return void t(s)}a.done?e(c):Promise.resolve(c).then(r,i)}var o=new Map,a=function(n){return o.get(n)},c=function(n,e){o.set(n,e)},s=function(){var n,e=(n=i().mark((function n(e){var t,r,u,o,a,s,l,d;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.length){n.next=2;break}return n.abrupt("return");case 2:for(t=[],r=!0,u=!1,o=void 0,n.prev=4,a=e[Symbol.iterator]();!(r=(s=a.next()).done);r=!0)l=s.value,d=fetch(l.url).then((function(n){return n.text()})),t.push(d);n.next=12;break;case 8:n.prev=8,n.t0=n.catch(4),u=!0,o=n.t0;case 12:n.prev=12,n.prev=13,r||null==a.return||a.return();case 15:if(n.prev=15,!u){n.next=18;break}throw o;case 18:return n.finish(15);case 19:return n.finish(12);case 20:return n.next=22,Promise.all(t);case 22:n.sent.forEach((function(n,t){c(e[t].label,n)}));case 24:case"end":return n.stop()}}),n,null,[[4,8,12,20],[13,,15,19]])})),function(){var e=this,t=arguments;return new Promise((function(r,i){var o=n.apply(e,t);function a(n){u(o,r,i,a,c,"next",n)}function c(n){u(o,r,i,a,c,"throw",n)}a(void 0)}))});return function(n){return e.apply(this,arguments)}}()},46908:function(n,e,t){"use strict";t.d(e,{U:function(){return o},w:function(){return a}});var r=t(94776),i=t.n(r);function u(n,e,t,r,i,u,o){try{var a=n[u](o),c=a.value}catch(s){return void t(s)}a.done?e(c):Promise.resolve(c).then(r,i)}var o=new Map,a=function(){var n,e=(n=i().mark((function n(e){var t;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return",null);case 2:if(!o.has(e)){n.next=4;break}return n.abrupt("return",o.get(e));case 4:if((t=new Image).src="data:image/svg+xml;utf8,"+encodeURIComponent(e),"function"!==typeof t.decode){n.next=9;break}return n.next=9,t.decode();case 9:return o.set(e,t),n.abrupt("return",t);case 11:case"end":return n.stop()}}),n)})),function(){var e=this,t=arguments;return new Promise((function(r,i){var o=n.apply(e,t);function a(n){u(o,r,i,a,c,"next",n)}function c(n){u(o,r,i,a,c,"throw",n)}a(void 0)}))});return function(n){return e.apply(this,arguments)}}()},41302:function(n){n.exports={header:"AuthBanner_header__hgvMD",wrapper:"AuthBanner_wrapper__Cznaq",text:"AuthBanner_text__SBtet",signIn:"AuthBanner_signIn__ugcMl",close:"AuthBanner_close__FmqGy"}}},function(n){var e=function(e){return n(n.s=e)};n.O(0,[2491,9774,2888,179],(function(){return e(412),e(5087)}));var t=n.O();_N_E=t}]);